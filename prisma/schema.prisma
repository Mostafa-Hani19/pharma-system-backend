generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

////////////////////////////////////////////////////////////
// ğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…ÙˆØ±Ø¯Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© Ù„ÙƒÙ„ Ù…Ø®Ø²Ù†)
////////////////////////////////////////////////////////////
model Company {
  id         Int         @id @default(autoincrement())
  name       String
  email      String?
  phone      String?
  warehouses Warehouse[] // â† ÙƒÙ„ Ø´Ø±ÙƒØ© Ù…Ù…ÙƒÙ† ÙŠÙƒÙˆÙ† Ù„ÙŠÙ‡Ø§ Ø£ÙƒØªØ± Ù…Ù† Ù…Ø®Ø²Ù†
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
}

////////////////////////////////////////////////////////////
// ğŸ¢ Ø§Ù„Ù…Ø®Ø²Ù†
////////////////////////////////////////////////////////////
model Warehouse {
  id        Int                 @id @default(autoincrement())
  name      String
  location  String
  isActive  Boolean             @default(true)
  medicines WarehouseMedicine[] // â† Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù…Ø®Ø²Ù†
  companyId Int?
  company   Company?            @relation(fields: [companyId], references: [id])
  requests  WarehouseRequest[] // â† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù„ÙŠ Ø¬Ø§Øª Ù…Ù† Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª
  createdAt DateTime            @default(now())
  updatedAt DateTime            @updatedAt
}

////////////////////////////////////////////////////////////
// ğŸ’Š Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø®Ø²Ù†
////////////////////////////////////////////////////////////
model WarehouseMedicine {
  id               Int      @id @default(autoincrement())
  warehouseId      Int
  name             String
  activeIngredient String? // â† Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„ÙØ¹Ø§Ù„Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  price            Float
  quantity         Int
  expirationDate   DateTime

  warehouse Warehouse @relation(fields: [warehouseId], references: [id])
}

////////////////////////////////////////////////////////////
// ğŸ¥ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©
////////////////////////////////////////////////////////////
model Pharmacy {
  id        Int                @id @default(autoincrement())
  name      String
  address   String
  email     String             @unique
  password  String
  isActive  Boolean            @default(true)
  medicines PharmacyMedicine[] // â† Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©
  requests  WarehouseRequest[] // â† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù„ÙŠ Ø¨ØªØ¹Ù…Ù„Ù‡Ø§ Ù…Ù† Ø§Ù„Ù…Ø®Ø§Ø²Ù†
  createdAt DateTime           @default(now())
  updatedAt DateTime           @updatedAt
}

////////////////////////////////////////////////////////////
// ğŸ’Š Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© (Ù…Ø³ØªÙ‚Ù„Ø©)
////////////////////////////////////////////////////////////
model PharmacyMedicine {
  id               Int      @id @default(autoincrement())
  pharmacyId       Int
  name             String
  activeIngredient String? // â† Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„ÙØ¹Ø§Ù„Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  price            Float
  quantity         Int
  expirationDate   DateTime

  pharmacy Pharmacy @relation(fields: [pharmacyId], references: [id])
}

////////////////////////////////////////////////////////////
// ğŸ§¾ Ø§Ù„Ø·Ù„Ø¨ Ø¨ÙŠÙ† Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ© ÙˆØ§Ù„Ù…Ø®Ø²Ù†
////////////////////////////////////////////////////////////
model WarehouseRequest {
  id           Int      @id @default(autoincrement())
  pharmacyId   Int
  warehouseId  Int
  medicineName String
  quantity     Int
  status       String   @default("pending") // pending | approved | rejected | delivered
  createdAt    DateTime @default(now())

  pharmacy  Pharmacy  @relation(fields: [pharmacyId], references: [id])
  warehouse Warehouse @relation(fields: [warehouseId], references: [id])
}

////////////////////////////////////////////////////////////
// ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ù„Ù…Ø±ÙŠØ¶)
////////////////////////////////////////////////////////////
model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
